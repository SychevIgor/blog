Тех кто пользуется Azure давно и много, всегда интересовал вопрос- а как посмотреть детализацию счета, который был выставлен.
Большими кусками можно было посмотреть либо на account, либо на конкретной подписке на azure.portal.com
Но лично мне этого всегда не хватало, т.к. сколько операций с диском или с сетью и когда я проводил- там не показано, только агрегрированные данные.

И вот, летом стало доступно 2 API: Usage API и ScoreCard API.
Через Usage API можно получить детализацию с точность от часа, до дня какие ресурсы были потреблены. 
Оба этих API, часть нового API- Azure Resource Manager.
Как это сделать через Powershell.

Сначала надо залогиниться через Login-AzureRmAccount.

Затем выбрать интересующий вас диапозон дат.
Есть один нюанс- сейчас даты API считает не по вашей текущей временной зоне, а по времени в США (в 4 утра 24 декабря по времени Новосибирска, я получил ошибку, что 24 число- это в будущем)
По этому надо выборку делать по американскому времени(а уж заподное или восточное побережье- я не проверял)

Пример вывода от API 

Как мы видем работа с диском и сетью, расписана до нескольких мегабайт и это на мой вщгляд круто. Раньше узнать эти данные, было крайне сложно, если не сказать невозможно.

Как я уже упомянул ранее, мы можем получить детализацию по часам, или по дням. Естественное по часам, будет более детальным и большим.

То, что powershell выводит в консоль или в файл, было получено в виде Json и данных там немного больше.
Давайте посмотреть какой объет был на самом деле получено. Сделать это можно, либо посмотрев их из powershell, либо открыть пример на C# с github https://github.com/Azure-Samples/billing-dotnet-usage-api

Я лично, не смог запустить Usage API пример на C#. Причина- powershell достаточно, чтобы вы были залогинены, а .net приложению почему-то нужно иметь доступ к Azure active directory, а мне надо быть его администратором... В такие моменты, понимаешь что быть сотрудником microsoft иногда тяжело, ибо где искать админа azure ad- я понятия не имею.
 
