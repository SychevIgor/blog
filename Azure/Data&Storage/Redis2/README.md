В начале 2015 года я уже рассказывал http://habrahabr.ru/company/microsoft/blog/247531/ , что Microsoft теперь рекомендует использовать Redis в качестве кэша, для всех новых проектов в Azure, а объявлена эта рекомендация была еще в 2014 году. 
В ноябре 2015 нам объявили что кэш, внутри cloud service, признан устаревшим https://azure.microsoft.com/en-us/documentation/articles/cache-faq/#which-azure-cache-offering-is-right-for-me и в будущих версиях sdk мы удалим работу с ним, и надо использовать Redis Cache. Именно это событие и побудило меня- рассказать, что добавилось за прошедший год в Redis

Давайте пойдем не от документации, а от портала.
Момент первый- есть много разных решений на портале, которые в названии имеют слово Redis. Это наши партнеры постарались, за что им спасибо. Нам же нужен тот, который опубликовала Microsoft.
 
Открываем панель настроек
Первый и самый базовый вопрос- какой набор фич выбрать (от этого набора фич зависит и стоимость)
 
Не думайте, что на картинке все возможные варианты с объем памяти, он может быть больше. Тут показаны именно наборы фичей.
Какие варианты мы видим? 
•	Basic- Инфраструктура, будет не выделанная конкретно под вас, а общая с еще кем-нибудь.
•	Standard- ресурсы уже будут зарезервированы под вашу базу, и ни каких шумных соседей, появляется sla т.к. и объем базы выше и появляется вторая реплика ваших данных.
•	Premium- самая крутая (включает все опции от standard, и еще много чего… но и самая дорогая) которую я предлагаю рассмотреть ниже.

Давайте разберем каждую фичу по отдельности
Clustering https://azure.microsoft.com/en-us/documentation/articles/cache-how-to-premium-clustering/ 
Суть кластера- разбить данные на части, и получить горизонтально-масштабируемую конфигурацию. Redis для вас раскидает ключи по нескольким шардам. Год назад cluster создать было нельзя в azure, да и вне azure эта фича была “alpha quality” (требующая доработок). 
 
Как мы видим- чем больше шардов мы используем, тем выше максимальные (суммарный) размер хранилища. Правда, чем больше объем, тем выше будет цена за итоговое решение. Максимально можно собрать кластер на 530 гигобайт(10 шардов по 53 гига)
Persistence https://azure.microsoft.com/en-us/documentation/articles/cache-how-to-premium-persistence/ 
Persistence- это сохранение inmemory базы данных на диск, или если быть точнее на storage. Сохранение происходит единым куском на данный момент, а не инкрементально т.к. это RDB http://redis.io/topics/persistence способ. В планах есть и второй способ сохранения данных в storage, AOF https://azure.microsoft.com/en-us/blog/azure-redis-cache-public-preview-of-premium-tier/ , но когда его сделают доступным- информации нет.
 Мы рекомендуем использовать premium storage, т.к. он быстрее т.к. основан на ssd. Все-таки писать из быстрой inmemory базы на медленное hdd хранилище- это достаточно редкое сочетание. Но если Вы хотите- пожалуйста пишите на standard storage.
Интеграция с виртуальными сетями https://azure.microsoft.com/en-us/documentation/articles/cache-how-to-premium-vnet/ 

 

Я специально оставил подсказку с портала, чтобы было проще объяснить. Вы можете либо обращаться к созданному для Вас Redis кластеру из интернета, либо из виртуальной сети. Либо по public ip, либо по private. Лично мне этой функции ранее больше всего не хватало.
 
Есть и второе ограничение- на данный момент мы можем использовать “Classis” виртуальные сети… что лично для меня печально. Если вы с этим согласны- прошу проголосвать за мою идею, чтобы команда разработки приоретизировала эту задачу https://feedback.azure.com/forums/169382-cache/suggestions/11327502-add-integration-with-v2-virtual-networks 

После того, как мы создали наш redis cache, можно посмотреть на остальные его опции
Во первых, все указанные нами ранее параметры можно изменить- не хватает объем=> увеличиваем объем, решили добавить еще 1 шард- устанавливаем sharding в enable добавляем шард, а redis перераспределяет ключи(мы должны понимать, что это не мгновенная операция)
Мониторинг
 
Если вы включили опцию мониторинг, то эксплуатация становится на много проще- вы будите знать и сколько у вас активных коннектов было, размер потребляемой памяти и еще множество метрик, которые вы можете настроить.
Ну и естественно, вы можете настроить нотификации(alerts)- если какие-то метрики вышли из диапазона допустимых значений. В частности- количество соединений можно указать, и если их число превысит порог получить сообщение на почту.
 

Configuration as Code
Конфигурацию Redis можно задать в виде ARM шаблона https://azure.microsoft.com/en-us/documentation/articles/cache-redis-cache-arm-provision/ 

В Visual Studio это будет выглядеть как JSON файл. Считайте, что это design time шаблон.  
А так-же мы можем посмотреть на execution time представление этого шаблона по адресу https://resources.azure.com/  
